global class MercadoPagoNotificationHandlerMock implements HttpCalloutMock {
    
    global HTTPResponse respond(HttpRequest req){

        HttpResponse res = new HttpResponse();
        res.setHeader('Content-Type', 'application/json');
        res.setStatusCode(200);

        System.debug(req.getEndpoint());
        if (req.getEndpoint().contains('1234567890')) {
            res.setBody('{"test":"123"}');
        } else if (req.getEndpoint().contains('MercadoPago_Payment_Default') || req.getEndpoint().contains('MercadoPago_Payment_Alternative')) {
            res.setBody('{"accounts_info":null,"acquirer_reconciliation":[],"additional_info":{"authentication_code":null,"available_balance":null,"ip_address":"181.29.48.66","items":[{"category_id":null,"description":null,"id":null,"picture_url":null,"quantity":"1","title":"Otra monedita más","unit_price":"15"}],"nsu_processadora":null},"authorization_code":null,"binary_mode":false,"brand_id":null,"build_version":"3.49.3","call_for_authorize_id":null,"captured":true,"card":{"bin":null,"cardholder":{"identification":{"number":null,"type":null},"name":null},"country":null,"date_created":null,"date_last_updated":null,"expiration_month":null,"expiration_year":null,"first_six_digits":null,"id":"9401141435","last_four_digits":"9698","tags":null},"charges_details":[{"accounts":{"from":"collector","to":"mp"},"amounts":{"original":0.62,"refunded":0},"client_id":0,"date_created":"2024-04-25T23:17:07.000-04:00","id":"77060262966-001","last_updated":"2024-04-25T23:17:07.000-04:00","metadata":{},"name":"mercadopago_fee","refund_charges":[],"reserve_id":null,"type":"fee"}],"collector_id":16877029,"corporation_id":null,"counter_currency":null,"coupon_amount":0,"currency_id":"ARS","date_approved":null,"date_created":"2024-04-25T23:17:07.000-04:00","date_last_updated":"2024-04-25T23:17:09.000-04:00","date_of_expiration":null,"deduction_schema":null,"description":"Otra monedita más","differential_pricing_id":null,"external_reference":null,"fee_details":[],"financing_group":null,"id":77060262966,"installments":1,"integrator_id":null,"issuer_id":"326","live_mode":true,"marketplace_owner":null,"merchant_account_id":null,"merchant_number":null,"metadata":{},"money_release_date":null,"money_release_schema":null,"money_release_status":"pending","notification_url":null,"operation_type":"regular_payment","order":{},"payer":{"email":null,"entity_type":null,"first_name":null,"id":"194123406","identification":{"number":null,"type":null},"last_name":null,"operator_id":null,"phone":{"number":null,"extension":null,"area_code":null},"type":null},"payment_method":{"data":{"routing_data":{"merchant_account_id":"1001"}},"id":"visa","issuer_id":"326","type":"credit_card"},"payment_method_id":"visa","payment_type_id":"credit_card","platform_id":null,"point_of_interaction":{"application_data":{"name":"recurring","version":"3.18.1-hotfix-2"},"business_info":{"branch":"Merchant Services","sub_unit":"recurring","unit":"online_payments"},"transaction_data":{"billing_date":"2024-04-26","first_time_use":true,"invoice_id":"d3534d646438419da00cfeb6ca80c01b","invoice_period":{"period":12,"type":"monthly"},"payment_reference":null,"plan_id":"a979b59016a64ac393fa25bcbfb27437","processor":null,"subscription_id":"7420b052ed02453eb905b9a5ab3a689f","subscription_sequence":{"number":1,"total":1},"user_present":null},"type":"SUBSCRIPTIONS"},"pos_id":null,"processing_mode":"aggregator","refunds":[],"shipping_amount":0,"sponsor_id":null,"statement_descriptor":null,"status":"rejected","status_detail":"cc_rejected_high_risk","store_id":null,"tags":null,"taxes_amount":0,"transaction_amount":15,"transaction_amount_refunded":0,"transaction_details":{"acquirer_reference":null,"external_resource_url":null,"financial_institution":null,"installment_amount":15,"net_received_amount":0,"overpaid_amount":0,"payable_deferral_period":null,"payment_method_reference_id":null,"total_paid_amount":15}}');
        } else if (req.getEndpoint().contains('MercadoPago_Preapproval_Default') || req.getEndpoint().contains('MercadoPago_Preapproval_Alternative')) {
            res.setBody('{"id":"8aee885b8f19dd51018f1b59b06f0b86","payer_id":1785163893,"payer_email":"","back_url":"https://www.mercadopago.com.ar/subscriptions","collector_id":1464660247,"application_id":3172086171935346,"status":"authorized","reason":"Plan Quintuanual","external_reference":"","date_created":"2024-04-26T13:00:13.806-04:00","last_modified":"2024-04-26T13:04:51.892-04:00","init_point":"https://www.mercadopago.com.ar/subscriptions/checkout?preapproval_id=8aee885b8f19dd51018f1b59b06f0b86","preapproval_plan_id":"2c9380848f0fc7d4018f1acd00ad0771","auto_recurring":{"frequency":12,"frequency_type":"months","transaction_amount":1000,"currency_id":"ARS","start_date":"2024-04-26T13:00:13.807-04:00","billing_day_proportional":false,"has_billing_day":false,"free_trial":null},"summarized":{"quotas":null,"charged_quantity":1,"pending_charge_quantity":null,"charged_amount":1000,"pending_charge_amount":null,"semaphore":"green","last_charged_date":"2024-04-26T13:01:49.783-04:00","last_charged_amount":1000},"next_payment_date":"2025-04-26T13:00:13.000-04:00","payment_method_id":"account_money","first_invoice_offset":null}');
        } else if (req.getEndpoint().contains('MercadoPago_Preapproval_Plan_Default') || req.getEndpoint().contains('MercadoPago_Preapproval_Plan_Alternative')) {
            res.setBody('{"id":"2c9380848f0fc7d4018f1acd00ad0771","back_url":"https://www.mercadopago.com.ar/subscriptions","collector_id":1464660247,"application_id":3172086171935346,"reason":"Plan Quintuanual","status":"active","external_reference":"","date_created":"2024-04-26T10:26:33.773-04:00","last_modified":"2024-04-26T10:26:33.995-04:00","init_point":"https://www.mercadopago.com.ar/subscriptions/checkout?preapproval_plan_id=2c9380848f0fc7d4018f1acd00ad0771","auto_recurring":{"frequency":12,"frequency_type":"months","transaction_amount":1000,"currency_id":"ARS"},"payment_methods_allowed":{}}');
        } else if (req.getEndpoint().contains('MercadoPago_Preapproval_Search_Default') || req.getEndpoint().contains('MercadoPago_Preapproval_Search_Alternative')) {
            res.setBody('{"paging":{"offset":0,"limit":10,"total":4},"results":[{"id":"8aa49af58f1796e5018f1866e6d5008d","status":"cancelled","reason":"Otra monedita más","summarized":{"quotas":1,"pending_charge_quantity":1,"pending_charge_amount":15},"payer_id":194123406,"back_url":"https://www.mercadopago.com.ar/subscriptions","collector_id":16877029,"application_id":3909856389923111,"external_reference":"","date_created":"2024-04-25T23:15:48.052-04:00","last_modified":"2024-04-25T23:15:48.965-04:00","preapproval_plan_id":"2c9380848f0fc7bc018f16c232100534","auto_recurring":{"frequency":12,"frequency_type":"months","transaction_amount":15,"currency_id":"ARS","start_date":"2024-04-25T23:15:48.052-04:00","end_date":"2025-04-25T23:15:48.052-04:00","has_billing_day":false,"billing_day_proportional":false},"payment_method_id":"visa","payer_first_name":"Juana","payer_last_name":"Manso"},{"id":"8aa49af58f1796e5018f18677d4f008e","status":"cancelled","reason":"Otra monedita más","summarized":{"quotas":1,"pending_charge_quantity":1,"pending_charge_amount":15},"payer_id":194123406,"back_url":"https://www.mercadopago.com.ar/subscriptions","collector_id":16877029,"application_id":3909856389923111,"external_reference":"","date_created":"2024-04-25T23:16:26.574-04:00","last_modified":"2024-04-25T23:16:28.983-04:00","preapproval_plan_id":"2c9380848f0fc7bc018f16c232100534","auto_recurring":{"frequency":12,"frequency_type":"months","transaction_amount":15,"currency_id":"ARS","start_date":"2024-04-25T23:16:26.574-04:00","end_date":"2025-04-25T23:16:26.574-04:00","has_billing_day":false,"billing_day_proportional":false},"payment_method_id":"master","payer_first_name":"Juana","payer_last_name":"Manso"},{"id":"8aef77c48f14f47f018f186738f90ddf","status":"cancelled","reason":"Otra monedita más","summarized":{"quotas":1,"pending_charge_quantity":1,"pending_charge_amount":15},"payer_id":194123406,"back_url":"https://www.mercadopago.com.ar/subscriptions","collector_id":16877029,"application_id":3909856389923111,"external_reference":"","date_created":"2024-04-25T23:16:09.079-04:00","last_modified":"2024-04-25T23:16:10.495-04:00","preapproval_plan_id":"2c9380848f0fc7bc018f16c232100534","auto_recurring":{"frequency":12,"frequency_type":"months","transaction_amount":15,"currency_id":"ARS","start_date":"2024-04-25T23:16:09.080-04:00","end_date":"2025-04-25T23:16:09.080-04:00","has_billing_day":false,"billing_day_proportional":false},"payment_method_id":"visa","payer_first_name":"Juana","payer_last_name":"Manso"},{"id":"8aa49af58f1796e5018f18681e28008f","status":"cancelled","reason":"Otra monedita más","summarized":{"quotas":1,"pending_charge_quantity":1,"pending_charge_amount":15},"payer_id":194123406,"back_url":"https://www.mercadopago.com.ar/subscriptions","collector_id":16877029,"application_id":3909856389923111,"external_reference":"","date_created":"2024-04-25T23:17:07.751-04:00","last_modified":"2024-04-25T23:17:09.124-04:00","preapproval_plan_id":"2c9380848f0fc7bc018f16c232100534","auto_recurring":{"frequency":12,"frequency_type":"months","transaction_amount":15,"currency_id":"ARS","start_date":"2024-04-25T23:17:07.751-04:00","end_date":"2025-04-25T23:17:07.751-04:00","has_billing_day":false,"billing_day_proportional":false},"payment_method_id":"account_money","payer_first_name":"Juana","payer_last_name":"Manso"}]}');
        } else{
            res.setBody('{"test":"123"}');
        }

        System.debug(req.getEndpoint());

        return res;
    }
}